(async()=>{const e=e=>document.getElementById(e),t=e=>document.createElement(e),n=await(async()=>{const e=await fetch(document.currentScript.getAttribute("path"));return await e.json()})();if(!n)return;const s=e("s-res");e("s-txt").focus(),e("s-txt").oninput=c=>{s.innerHTML="";const r=c.target.value.trim().split(/[\s\-]+/);if(!r[0])return;e("s-res").innerHTML="";const a=document.createDocumentFragment();n.forEach((e=>{var n=e.title.trim(),s=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),c=-1,o=-1;for(const i of r){if(c=n.indexOf(i),o=s.indexOf(i),c<0&&o<0)return;const r=new RegExp(`(${i})`,"gi"),d='<span class="s-key">$1</span>',l=n.replace(r,d),p=s.substring(o-10,o+50).replace(r,d),u=t("a"),m=t("span"),f=t("span");u.href=e.link,u.className="s-item",m.innerHTML=l,f.innerHTML=p+"...",m.className="s-title",f.className="s-cont",u.appendChild(m),u.appendChild(f),a.appendChild(u)}})),s.appendChild(a);var o=0;let i=s.childNodes.length;window.addEventListener("keydown",(t=>{"ArrowDown"===t.code&&(o<i?o++:o=1,s.childNodes[o-1].focus()),"ArrowUp"===t.code&&(o>1?o--:o=i,s.childNodes[o-1].focus()),"Escape"===t.code&&e("s-txt").focus()}))}})();